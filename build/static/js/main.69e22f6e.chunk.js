(this.webpackJsonpreact_typescript_todo=this.webpackJsonpreact_typescript_todo||[]).push([[0],{153:function(e,t,n){},154:function(e,t,n){},176:function(e,t,n){},177:function(e,t,n){},187:function(e,t,n){},253:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(26),s=n.n(o),r=(n(153),n(154),n(25)),i=n(79),d=n.n(i),l="ADD_TODO_SUCCESS",u="ADD_TODO_SUCCESS",j="DELETE_TODO_SUCESS",b="DELETE_TODO_FAILURE",m="TODO_STATUS_CHANGE_SUCCESS",p="TODO_STATUS_CHANGE_FAILURE",O="FETCH_TODOS_REQUEST",f="FETCH_TODOS_SUCCESS",g="FETCH_TODOS_FAILURE",h="RESET_SUCCESS",x="RESET_ERROR",y="http://mern-biginners.herokuapp.com",T="/api/todos/",S=n(110),v=n(134),C={loading:!1,todos:[],error:"",success:""},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(r.a)(Object(r.a)({},e),{},{loading:!0});case f:return{loading:!1,todos:t.payload,error:""};case g:return{loading:!1,todos:[],error:t.payload};case l:return Object(r.a)(Object(r.a)({},e),{},{todos:[t.payload].concat(e.todos),success:t.message});case u:return Object(r.a)(Object(r.a)({},e),{},{error:t.message});case j:return Object(r.a)(Object(r.a)({},e),{},{todos:e.todos.filter((function(e){var n;return e._id!==(null===(n=t.payload)||void 0===n?void 0:n._id)})),success:t.message});case b:return Object(r.a)(Object(r.a)({},e),{},{error:t.message});case m:return Object(r.a)(Object(r.a)({},e),{},{todos:e.todos.map((function(e){return t.payload&&t.payload._id===e._id?t.payload:e})),success:t.message});case p:return Object(r.a)(Object(r.a)({},e),{},{error:t.message});case h:return Object(r.a)(Object(r.a)({},e),{},{success:t.message});case x:return Object(r.a)(Object(r.a)({},e),{},{error:t.message});default:return e}},_=Object(S.b)(E,Object(S.a)(v.a)),D=function(e){return function(t){d.a.post(y+T,e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){var n=e.data;t(function(e,t){return{type:l,message:e,payload:t}}("Todo added Successfully",n))})).catch((function(e){t(function(e){return{type:u,payload:null,message:e}}(e.message))}))}},w=function(e){return function(t){d.a.delete(y+T+e._id,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(n){t(function(e,t){return{type:j,payload:t,message:e}}("Todo deleted Successfully",e))})).catch((function(e){t(function(e){return{type:b,payload:null,message:e}}(e.message))}))}},F=function(e){return function(t){var n=Object(r.a)({},e);e.completed?n.completed=!1:n.completed=!0;d.a.patch(y+T+n._id,n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){t(function(e,t){return{type:m,payload:t,message:e}}("Todo status updated Successfully",n))})).catch((function(e){var n;t((n=e.message,{type:p,payload:null,message:n}))}))}},U=function(){return{type:O}},N=function(e){return{type:f,payload:e}},R=function(e){return{type:g,payload:null,message:e}};function k(e){return{type:h,payload:null,message:""}}_.subscribe((function(){}));var A=n(72),I=n(41),L=n(257),H=n(48),M=(n(176),n(256)),B=n(99),Y=n(260),V=n(261),q=n(57),G=n(147),J=n(262),P=(n(177),n(97)),z=n(8),Q=function(e){var t=e.endDate,n=e.completed,c=Object(a.useState)(""),o=Object(P.a)(c,2),s=o[0],r=o[1];return Object(a.useEffect)((function(){r(n?"Completed.":t?function(e){if(e){var t=new Date(new Date(e).getTime()-(new Date).getTime()),n=t.getUTCMonth(),a="months";return console.log("nnn"),console.log(n),n<1&&(n=t.getUTCDate()-1,a="days"),n<1&&(n=t.getUTCHours()-1,a="hours"),"".concat(n," ").concat(a," remaining")}return""}(t):"-")}),[n,t]),Object(z.jsx)("div",{className:n?"text-green-500":"text-red-500",children:s})},K=function(e){var t=e.todo,n=e.onTodoRemoval,a=e.onTodoStatusChange;return Object(z.jsx)("div",{children:Object(z.jsx)(M.b.Item,{actions:[Object(z.jsx)(B.a,{title:t.completed?"Mark as uncompleted":"Mark as completed",children:Object(z.jsx)(Y.a,{onChange:function(e){return a(t,e)},defaultChecked:t.completed})}),Object(z.jsx)(V.a,{title:"Are you sure you want to delete?",onConfirm:function(){n(t)},children:Object(z.jsx)(q.a,{className:"align-center",type:"primary",danger:!0,children:Object(z.jsx)(J.a,{})})})],className:"list-item",children:Object(z.jsx)("div",{className:"todo-item",children:Object(z.jsxs)("div",{children:[Object(z.jsx)(G.a,{color:"#BEBEBE",className:"todo-tag",children:t.title}),Object(z.jsx)("div",{className:"align-text-bottom text-base text-left bottomInfo block bg-blac",children:Object(z.jsx)(Q,{endDate:t.endDate,completed:t.completed})})]})})},t._id)})},W=function(e){var t=e.todos,n=e.onTodoRemoval,a=e.onTodoStatusChange;return Object(z.jsx)(M.b,{locale:{emptyText:"Nothing to be done"},dataSource:t,renderItem:function(e){return Object(z.jsx)(K,{todo:e,onTodoStatusChange:a,onTodoRemoval:n})},pagination:{position:"bottom",pageSize:10}})},X=n(258),Z=n(259),$=n(255),ee=n(263),te=(n(187),function(e){var t=e.onFormSubmit,n=X.a.useForm(),a=Object(P.a)(n,1)[0];return Object(z.jsxs)(X.a,{form:a,onFinish:function(){t({title:a.getFieldValue("title"),description:a.getFieldValue("description"),endDate:a.getFieldValue("endDate")}),a.resetFields()},layout:"vertical",className:"todo-form",children:[Object(z.jsx)(A.a,{children:Object(z.jsx)(I.a,{span:24,children:Object(z.jsx)(X.a.Item,{name:"title",label:"Todo title : ",wrapperCol:{span:100},rules:[{required:!0,message:"name required"}],children:Object(z.jsx)(Z.a,{placeholder:"add new todo"})})})}),Object(z.jsx)(A.a,{children:Object(z.jsx)(I.a,{span:24,children:Object(z.jsx)(X.a.Item,{name:"description",label:"Todo description : ",children:Object(z.jsx)(Z.a,{placeholder:"add description"})})})}),Object(z.jsx)(A.a,{children:Object(z.jsx)(I.a,{span:24,children:Object(z.jsx)(X.a.Item,{name:"endDate",label:"Closing time : ",children:Object(z.jsx)($.a,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss",className:"w-full",disabledDate:function(e){return e&&e.valueOf()<Date.now()}})})})}),Object(z.jsx)(A.a,{children:Object(z.jsx)(I.a,{xs:24,sm:24,md:7,lg:5,xl:4,children:Object(z.jsxs)(q.a,{type:"ghost",htmlType:"submit",block:!0,children:[Object(z.jsx)(ee.a,{}),"Add todo"]})})})]})}),ne=function(){var e=Object(H.c)((function(e){return e})),t=Object(H.b)();Object(a.useEffect)((function(){t((function(e){e(U()),d.a.get(y+T).then((function(t){var n=t.data;e(N(n))})).catch((function(t){e(R(t.message))}))}))}),[]);return e.loading?Object(z.jsx)("h2",{children:"Loading..."}):Object(z.jsxs)(A.a,{justify:"center",align:"middle",gutter:[0,15],children:[Object(z.jsx)(I.a,{xs:{span:23},sm:{span:23},md:{span:21},lg:{span:20},xl:{span:18}}),Object(z.jsx)(I.a,{xs:{span:23},sm:{span:23},md:{span:21},lg:{span:20},xl:{span:18},children:Object(z.jsx)(L.a,{title:"Create a new todo",children:Object(z.jsx)(te,{onFormSubmit:function(e){t(D(e))}})})}),Object(z.jsx)(I.a,{xs:{span:23},sm:{span:23},md:{span:21},lg:{span:20},xl:{span:18},children:Object(z.jsx)(L.a,{title:"Todo List",children:Object(z.jsx)(W,{todos:e.todos,onTodoRemoval:function(e){t(w(e))},onTodoStatusChange:function(n,a){t(F(n));var c=e.todos.find((function(e){return e._id===n._id}));c&&(a.target.checked=1==c.completed)}})})})]})},ae=n(144),ce=function(){var e=Object(H.c)((function(e){return e.success})),t=Object(H.c)((function(e){return e.error})),n=Object(H.b)();return Object(a.useEffect)((function(){e&&(ae.b.success(e),n(k()))}),[n,e]),Object(a.useEffect)((function(){t&&(ae.b.error(t),n(k()))}),[n,t]),Object(z.jsx)(z.Fragment,{})},oe=function(e){var t=e.store;return Object(a.useEffect)((function(){U()}),[]),Object(z.jsx)(H.a,{store:t,children:Object(z.jsxs)("div",{className:"h-auto relative bg-gradient-to-r from-black via-gray-500 to-black",children:[Object(z.jsx)("img",{className:"fixed w-screen top-0 left-0 opacity-30 object-cover h-screen",src:"/images/bg2.jpg",alt:""}),Object(z.jsxs)("div",{className:"relative",children:[Object(z.jsx)(ne,{}),Object(z.jsx)(ce,{})]})]})})},se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,264)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),o(e),s(e)}))};s.a.render(Object(z.jsx)(c.a.StrictMode,{children:Object(z.jsx)(oe,{store:_})}),document.getElementById("root")),se()}},[[253,1,2]]]);
//# sourceMappingURL=main.69e22f6e.chunk.js.map